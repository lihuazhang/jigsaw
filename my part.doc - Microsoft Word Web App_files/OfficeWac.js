/* Copyright (C) 2012 Microsoft Corporation */Microsoft.Live.Folders.Web.Scripts.SdxDelegate=function(){};var __d_proto=Microsoft.Live.Folders.Web.Scripts.SdxDelegate.prototype;__d_proto.create=function(b,a){if(!b){a.invoke=a;return a}return this.internalCreate([b,a])};__d_proto.combine=function(a,b){var c=this;if(!a){if(!b._targets)return c.create(null,b);return b}if(!b){if(!a._targets)return c.create(null,a);return a}var d=a._targets?a._targets:[null,a],e=b._targets?b._targets:[null,b];return c.internalCreate(d.concat(e))};__d_proto.remove=function(c,a){if(!c||c===a)return null;if(!a)return c;var b=c._targets,f=null,e;if(a._targets){f=a._targets[0];e=a._targets[1]}else e=a;for(var d=0;d<b.length;d+=2)if(b[d]===f&&b[d+1]===e){if(b.length==2)return null;b.splice(d,2);return this.internalCreate(b)}return c};__d_proto.internalCreate=function(a){var b=function(){if(a.length==2)return a[1].apply(a[0],arguments);else{for(var b=0;b<a.length;b+=2)a[b+1].apply(a[b],arguments);return null}};b.invoke=b;b._targets=a;return b};var SdxDelegate=new Microsoft.Live.Folders.Web.Scripts.SdxDelegate;$WacHeader={};new function(){var a="offsetWidth",e="style",f="width",g="px";function d(b,d,c,h){b[e][f]="";var i=b[a]+c+h;if(i>d)b[e][f]=Math.max(d-c-h,0)+g}function b(){if(!_ge("wh_container"))return;var b=15;d(_ge("wh_file"),_ge("wh_filehost")[a],_ge("wh_logo")[a]+_ge("wh_host")[a],b);if(!!_ge("wh_user"))d(_ge("wh_user"),_ge("wh_signinout")[a],_ge("wh_signout")[a],b)}function c(){jQuery(window).unbind("resize",b);jQuery(window).unbind("unload",c)}function h(){jQuery(window).bind("resize",b);jQuery(window).bind("unload",c);b()}$WacHeader.init=h;$WacHeader.redraw=b;$WacHeader.dispose=c};if(window.wacHeaderAutoLoad===true)$WacHeader.init();Microsoft.Live.Folders.Web.Scripts.WacPage=function(e,g,b,d,c,f){var a=this;a.wacIframeId=e;a.isIE=g;a.isUsingWacHeader=b;a.resizeHandler=SdxDelegate.create(a,a.resizeIframe);if(a.isUsingWacHeader)a.redrawHandler=SdxDelegate.create(a,$WacHeader.redraw);a.disposeHandler=SdxDelegate.create(a,a.dispose);if(d)a.registerCommands();a.addHtmlClasses(c,f);a.attachWindowEvents()};var __wp_proto=Microsoft.Live.Folders.Web.Scripts.WacPage.prototype;__wp_proto.registerCommands=function(){var a=this;registerCommand("download",SdxDelegate.create(a,a.downloadItem));registerCommand("closeMenu",SdxDelegate.create(a,a.closeMoreMenu))};__wp_proto.addHtmlClasses=function(b,c){if(b!=null&&c!=null){var a=document.getElementsByTagName("html")[0];addCssClass(a,"sdx_html");addCssClass(a,"sdx_html_"+b);addCssClass(a,"sdx_html_"+c)}};__wp_proto.attachWindowEvents=function(){var a=this,b=jQuery(window);if(a.isIE){b.bind("resize",a.resizeHandler);b.bind("unload",a.disposeHandler);a.resizeIframe()}else if(a.isUsingWacHeader){b.bind("resize",a.redrawHandler);b.bind("unload",a.disposeHandler);$WacHeader.redraw()}};__wp_proto.downloadItem=function(a){try{window.location=a}catch(b){}};__wp_proto.closeMoreMenu=function(){$menu.closeCurrent()};__wp_proto.resizeIframe=function(){var b=this,a=_ge(b.wacIframeId),c=Math.max(document.documentElement.clientHeight-jQuery(a).offset().top,0);a.style.height=c+"px";if(b.isUsingWacHeader)$WacHeader.redraw()};__wp_proto.dispose=function(){var a=this,b=jQuery(window);if(a.isIE){b.unbind("resize",a.resizeHandler);b.unbind("unload",a.disposeHandler)}else if(a.isUsingWacHeader){b.unbind("resize",a.redrawHandler);b.unbind("unload",a.disposeHandler)}}