/* Copyright (C) 2012 Microsoft Corporation */(function(){"use strict";var b=window.jQuery,c=wLive.Controls.Notifications=wLive.Controls.Notifications||{},a=new function(){var a=this,c={},d=[];a.showDelay=600;a.start=function(){if(d){var b=d,c=b.length;d=null;for(var a=0;a<c;a++)b[a]()}};a.addNotification=function(e,f,b){if(d)d.push(function(){a.addNotification(e,f,b);a.showNextNotification(b.queueGroup)});else{var g=b.queueGroup||"default",i=b.queueMode||"fifo",h=c[g]=c[g]||{current:null,items:[]};h.items.push({mode:i,notification:e,callback:f})}};a.showNextNotification=function(f){var b=c[f],a,d,e=function(d){var a,f=d.length,b={mode:null,item:null},c,e;for(a=0;a<f;a++){c=d[a];e=b.mode=c.mode;b.item=c;if(e==="fifo")break}return b.item};if(b&&b.items.length>0){a=b.current;d=b.items;if(a&&a.mode==="filo"&&b.items.length>1){a.notification.hide();a=null}if(!a){a=b.current=e(d);a.callback()}}};a.removeNotification=function(d){b.each(c,function(g,e){var c=e.items,f=false;for(var b=c.length-1;b>=0;b--)if(c[b].notification===d){if(c[b]===e.current)e.current=null;c.splice(b,1);f=true;break}if(f)setTimeout(function(){a.showNextNotification(g)},a.showDelay)})};a.reset=function(){b.each(c,function(e,d){var b=d.items,c;for(var a=b.length-1;a>=0;a--){c=b[a];if(c===d.current)c.notification.dismiss();else b.splice(a,1)}})};a.registerSearchApi=function(e,d){a[e]=function(g){var l=[],a,j,h,i,k,e,f;g=g||function(){return true};if(!d||d.length===0)a=c;else a=b.map(d,function(a){return c[a]});j=a.length;for(e=0;e<j;e++){i=a[e].items;k=i.length;for(f=0;f<k;f++){h=i[f].notification;if(g(h))l.push(h)}}return l}}};c.getQueue=function(){return a};c.dispose=function(){if(a){a.reset();a=null}}})();(function(){"use strict";var c=window.jQuery,a=wLive.Controls.Notifications,b=a.AutomationOptions=new function(){var c=this,a,b;c.setModeAndLabels=function(d,c){a=d;b=c};c.getLabelAttribute=function(){return a};c.getLabelValue=function(d){var c;if(a&&a!==""&&b)c=b[d];return c};c.getLabel=function(f,d){var e="",c,g=function(a){return (d?d[a]:null)||b[a]};if(a&&a!==""&&b&&(c=g(f))&&c!=="")e=" "+a+'="'+c+'" ';return e}}})();(function(){"use strict";var m=27,o=9,a=window.jQuery,q=wLive.Animations,d=wLive.Controls.Notifications,n=a(d),c=d.InternalTools=d.InternalTools||{},f=d.AutomationOptions,k=a(window),b=a("BODY"),e=b[0],l={fadein:"fadeIn",fadeout:"fadeOut",slidein:"showEdgeUI",slideout:"hideEdgeUI",slidefadein:"enterContent",slidefadeout:"exitContent"},h=c.Toolkit={isEmptyString:function(a){return typeof a==="undefined"||a==null||a==""},checkEmptyArgument:function(b,a){if(h.isEmptyString(b))throw new Error(a);},getExtraDimensions:function(b){var c={},d=/\d+/,a=function(a){return parseInt(a)||0};c.left=a(b.css("marginLeft"))+a(b.css("borderLeftWidth"))+a(b.css("paddingLeft"));c.right=a(b.css("marginRight"))+a(b.css("borderRightWidth"))+a(b.css("paddingRight"));c.width=c.left+c.right;c.top=a(b.css("marginTop"))+a(b.css("borderTopWidth"))+a(b.css("paddingTop"));c.bottom=a(b.css("marginBottom"))+a(b.css("borderBottomWidth"))+a(b.css("paddingBottom"));c.height=c.top+c.bottom;return c},sanitizeOptions:function(b,e){var d=null;if(b){var c={};a.each(b,function(b,d){if(a.inArray(b,e)>=0)c[b]=d});d=c}return d},registerChangeUserOptionsApi:function(e,b,c){var f=function(d){a.extend(b,h.sanitizeOptions(d,c))};d["set"+e+"DefaultOptions"]=f},isLtr:function(){return a("BODY").css("direction")==="ltr"}},g=c.ButtonHelper=function(e,b){var h=this,c=[],f=a.extend({action:false,close:false,alternate:false},b&&b.excludes?b.excludes:{}),d=b&&b.renderOrder?b.renderOrder.split(","):g.buttonNames;(function(){var b,a,g,i,h;if(e){h=d.length;for(g=0;g<h;g++){b=d[g];a=e[b];if(!f[b]&&a&&typeof a==="string"&&a!=="")c.push({name:b,title:a})}}})();h.getNamesAndTitles=function(){return c}};g.buttonNames=["action","close","alternate"];g.automationKeys={};a.each(g.buttonNames,function(b,a){g.automationKeys[a]=a.charAt(0).toUpperCase()+a.substr(1)+"Button"});c.DeferredManager=function(g,e){var d=this,c=null,b=null;function f(){if(e)c=e();else c={}}f();d.getDeferred=function(){return b=b||a.Deferred()};d.updateState=function(b){if(b&&typeof b==="object")c=a.extend({},c,b)};d.resolve=function(){if(b){b.resolveWith(g,[c]);b=null}f()}};var j=c.TemplateHelper={basicContainer:'<div><div class="OuterContainer" {{#if backgroundColor}}style="background-color: {{=backgroundColor}};"{{/if}}><div class="InnerContainer"><div class="Content {{=contentCssClassnames}}">{0}</div></div></div></div>',defaultPartialTemplate:'{{each $data tmpl="Notifications.UserAreaSubTemplate"}}{{each $data tmpl="Notifications.ButtonSubTemplate"}}',registerTemplate:function(c){var b=c.html||j.defaultPartialTemplate;b=j.basicContainer.format(b);a.template(c.id,b)},render:function(i,k,o,e,m){var j=i.options.automationOptions,d=a.extend({contentCssClassnames:"",renderTitle:true,showNotificationArea:false,shouldRenderButtonArea:function(){return this.showNotificationArea&&e||this.buttons.length>0},prepareForAutomation:function(a){return f.getLabel(a,j)},buttons:a.map(m.getNamesAndTitles(),function(b){return a.extend({getButtonLabel:function(){return f.getLabel(c.ButtonHelper.automationKeys[this.name],j)}},b)})},i.options);if(h.isEmptyString(k)&&d.renderTitle)d.renderTitle=false;var g=a.views,l=g.activeViews;g.activeViews=false;var n=a.render(d,i.id);g.activeViews=l;var b=a(n);b.find(".UserTitle").append(k);b.find(".UserContent").append(o);if(d.showNotificationArea&&!h.isEmptyString(e))b.find(".NotificationArea").append(e);return b}};a.template("Notifications.ButtonSubTemplate",'{{#if shouldRenderButtonArea()}}<div class="ButtonArea">{{#if showNotificationArea}}<div class="NotificationArea" {{=prepareForAutomation("NotificationArea")!}}></div>{{/if}}{{#each buttons}}<button name="{{=name}}" type="button" {{#if name=="action"}}class="default c_nobdr"{{/if}} {{=$data.getButtonLabel()!}}>{{=title}}</button>{{/each}}</div>{{/if}}');a.template("Notifications.UserAreaSubTemplate",'<div class="UserArea"><div class="Clipper">{{#if renderTitle}}<div class="UserTitle{{#if titleCssClassnames}} {{=titleCssClassnames}}{{/if}}" {{=prepareForAutomation("Title")!}}></div>{{/if}}<div class="UserContent" {{=prepareForAutomation("Contents")!}}></div></div></div>');var p=c.TimerHelper=function(c,i,e){var h=this,a,d,b,f=function(){a=null;i()},k=function(){if(!b){b=new Date;clearTimeout(a);a=null}},j=function(){if(b&&d){var e=c-(b-d);b=null;d=new Date;a=setTimeout(f,e)}},g={mouseenter:k,mouseout:j};h.start=function(){if(c&&(c=parseInt(c))>0&&e&&e.length>0){e.bind(g);d=new Date;a=setTimeout(f,c)}};h.stop=function(){if(a){e.unbind(g);clearTimeout(a);a=null}}},i=c.NotificationBase=function(w){var u=this,qb=a(u),z=false,t=null,v=null,r=null,y=null,cb=false,s=w.instance,pb=a(s),A=a.extend({},i.defaultUserOptions,w.userOptions),g=a.extend({},i.defaultControlOptions,w.controlOptions),x=w.render=w.render||{},J=w.timer=w.timer||{},F=null,E=new c.DeferredManager(s),bb=new c.ButtonHelper(x.buttons,x.buttonOptions),D=null,P=false;x.template=x.template||{};x.template.options=x.template.options||{};x.template.options.automationOptions=h.sanitizeOptions(A.automation,["ActionButton","CloseButton","AlternateButton","Title","Contents"]);u.changeAnimation=function(d,c,a){if(g.changeAnimationOnUserInteraction){var b=d?"entrance":"exit";g.animation[b+"Type"]=c;if(typeof a!=="undefined")g.animation[b+"Arguments"]=a}};u.popoverElement=function(){return v};u.isHidden=function(){return z};u.getButton=function(c){var a=null,b;if(!c||(b=c.buttonName+"")==="")throw new Error("buttonName was not supplied.");if(r)a=r.find(".ButtonArea BUTTON[name="+b+"]");return a};u.getDeferredManager=function(){return E};u.reposition=function(){if(t){N();t.recalc()}};u.hide=function(){if(t&&!z){C("before","hide");B("beforehide");z=true;t.minimize();T();C("after","hide");B("afterhide")}};u.dismiss=function(c){var a,b=function(){d.getQueue().removeNotification(s)};if(t){a=C("before","dismiss");if(a===false)return;a=B("beforedismiss");if(a===false)return;G(c,"beforeDismiss");lb();ib();jb();S();hb();nb();W(false).then(function(){if(t){t.hide();r.remove();v=null;r=null;t.dispose();t=null;y=null;a=C("after","dismiss");if(a===false)return;a=B("afterdismiss");if(a===false)return;E.resolve();b();var c;if(A.returnFocusTo&&(c=A.returnFocusTo["focus"])&&typeof c==="function")A.returnFocusTo.focus()}})}else b()};u.show=function(c){var f=d.getQueue(),h=E.getDeferred(),b,e=false;if(!t){f.addNotification(s,function(){if(t&&z){T();t.restore();z=false}else if(!t){b=C("before","show");if(b!==false){b=B("beforeshow");if(b!==false){var d=j.render(x.template,x.title,x.content,x.notificationArea,bb);if(A.focusFirstButton&&bb.getNamesAndTitles().length>0)g.focusElement=d.find(".ButtonArea BUTTON").first()[0];G(c,"afterRendering",[d]);g.anchorElement=g.anchorElement||window;t=new $UI.Dialog(!!g.isModal,g.dialogZindex,!!w.positioner,"NotificationBase "+g.controlCss+" "+A.moreCss,g.anchorElement,g.trapTab);d.appendTo(A.notificationContainer||"#notificationContainer");v=t.setContents(d[0]);r=a(v);N();G(c,"beforeShow");kb();fb();ob();mb();t.show(g.focusElement,!g.setFocus);y=a("#UI_Dialog_BG");V(false);W(true).then(function(){if(!e){e=true;V(true);G(c,"afterShow");setTimeout(function(){gb();R();eb()},0);B("aftershow");b=C("after","show")}})}}}},g);f.showNextNotification(g.queueGroup)}else if(z)t.restore();return h.promise()};s.content=u.popoverElement;s.isHidden=u.isHidden;s.getButton=u.getButton;s.show=function(){return u.show()};s.dismiss=function(){u.dismiss()};s.hide=u.hide;s.reposition=u.reposition;function V(b){var a=b?"show":"hide";if(r){r[a]();y[a]()}}function C(c,b,a){a=a||[s];return n.triggerHandler(c+w.name+b,a)}function B(b,a){a=a||[s];return pb.triggerHandler(b,a)}function G(b,d,c){var a=b?b[d]:null;if(a&&typeof(a==="function"))a.apply({},c||[])}function mb(){var b=f.getLabelValue(g.automationKey);if(b)a(v).attr(f.getLabelAttribute(),b)}function T(){if(r){var a=f.getLabelAttribute();if(a){var b="automationtemp",c=r.attr(b);if(c&&c!==""){r.attr(a,c);r.attr(b,"")}else{var d=r.attr(a);if(d&&d!==""){r.attr(b,d);r.attr(a,"")}}}}}function ob(){if(J.timeoutInMsecs){F=new p(J.timeoutInMsecs,J.callback,J.getElements());F.start()}}function nb(){if(F){F.stop();F=null}}function N(){if(t&&v&&!z&&w.positioner){w.positioner(t.dock,v,g.anchorElement,g,A);var b=t.dock,a=null;if(b.y!==null)a={top:b.y};if(b.x!==null){a=a||{};a.left=b.x}if(a)r.css(a)}}function W(m){var b=g.animation||{},i=b.type||"none",k=b.entranceType||i+"in",n=b.exitType||i+"out",f,c,e,h,j=[v];if(y&&y.length>0)j.push(y[0]);if(m){f=k;c=b.entranceArguments}else{f=n;c=b.exitArguments}e=l[f];if(e){var d=[j];if(typeof c!=="undefined")d.push(c);d.push(false);h=q[e].apply({},d)}else h=a.Deferred().resolve();return h}function Y(a){if(a&&!L(a,v)){var b=$UI.Dialog.findFocusableElement(v,v,true);if(b)setTimeout(function(){try{b.focus()}catch(a){}},0)}}function H(a){var c=a.which;if(!z)if(c===m){u.changeAnimation(false,"none");a.stopPropagation();if(r.find(".ButtonArea button[name=close]").length>0){var b="close";E.updateState({buttonClicked:b});B("buttonclick",[s,b])}s.dismiss()}else if(c===o){Y(a.srcElement);if(!P){r.find("BUTTON.default.c_nobdr").removeClass("c_nobdr");P=true}}}function Z(a){Y(a.srcElement)}function kb(){if(g.dismissOnEsc)r.keydown(H);if(g.isModal){b.keyup(H);b.focusin(Z)}}function lb(){if(g.dismissOnEsc)r.unbind("keydown",H);if(g.isModal){b.unbind("keyup",H);b.unbind("focusin",Z)}}function X(b){var d=b&&b.srcElement&&b.srcElement.name||a(this).attr("name"),c;u.changeAnimation(false,"none");b.stopPropagation();E.updateState({buttonClicked:d});c=a(s).triggerHandler("buttonclick",[s,d]);if(c!==false&&A.dismissOnButtonClick)s.dismiss()}function fb(){r.find(".ButtonArea button").bind("click.notification",X)}function ib(){r.find(".ButtonArea button").unbind("click.notification",X)}function R(){k.bind({"resize.nbwindowchanged":M,"scroll.nbwindowchanged":M})}function S(){k.unbind(".nbwindowchanged",M)}function M(){if(!z){S();N();R()}}function U(){return _ge("UI_Dialog_BG")||e}function gb(){if(g.dismissOnOutsideClick){var b=U(),d=a(b),c=function(){if(b.addEventListener)b.addEventListener("click",I,true);else{b.attachEvent("onclick",I);if(!_ge("UI_Dialog_BG")&&e.setCapture){e._capturingClicks=true;e.attachEvent("onlosecapture",ab);O()}}D=null};if(g.delayOutsideClickDetectionByMsecs<=0)c();else D=setTimeout(c,g.delayOutsideClickDetectionByMsecs)}}function jb(){var b=U(),c=a(b);if(g.dismissOnOutsideClick){if(D!=null){clearTimeout(D);D=null}if(b.removeEventListener)b.removeEventListener("click",I,true);else{b.detachEvent("onclick",I);if(!_ge("UI_Dialog_BG")&&b.releaseCapture){b._capturingClicks=false;b.detachEvent("onlosecapture",ab);b.releaseCapture()}}}}function L(a,c){var b=false;while(a)if(a===c){a=null;b=true}else a=a.parentElement;return b}function I(a){if(z||a._alreadyCaptured)return;if(!L(a.srcElement,v))s.dismiss();if(!e.addEventListener&&e.setCapture){a._alreadyCaptured=true;a.srcElement.click();if(e._capturingClicks)O()}if(a._alreadyCaptured)a._alreadyCaptured=false}function ab(){if(b){var a=b[0];a.attachEvent("onmousemove",db);cb=false}}function O(){if(b){b[0].setCapture(true);cb=true}}function db(){if(b){O();b[0].detachEvent("onmousemove",db)}}function Q(a){a.stopImmediatePropagation();a.preventDefault();if(g.dismissOnOutsideClick)K(a)}function K(a){if(a&&a.srcElement&&!L(a.srcElement,v))s.dismiss()}function eb(){if(y&&g.isModal)y.bind("contextmenu",Q);if(b&&g.dismissOnOutsideClick)b.bind("contextmenu",K)}function hb(){if(y&&g.isModal)y.unbind("contextmenu",Q);if(b&&g.dismissOnOutsideClick)b.unbind("contextmenu",K)}};i.defaultControlOptions={anchorElement:null,ariaOptions:null,automationKey:null,changeAnimationOnUserInteraction:true,controlCss:null,dismissOnEsc:true,dismissOnOutsideClick:false,delayOutsideClickDetectionByMsecs:0,focusElement:null,isModal:false,returnFocusTo:null,setFocus:false,trapTab:true,queueGroup:null,queueMode:"fifo"};i.defaultUserOptions={dismissOnButtonClick:true,focusFirstButton:true,moreCss:null}})();(function(){"use strict";var a=window.jQuery,o=window.wLive,d=o.Controls.Notifications,q=a(d),p=d.AutomationOptions,i=d.InternalTools,b=i.Toolkit,l="Notifications.Bar";i.TemplateHelper.registerTemplate({id:l,html:'{{each $data tmpl="Notifications.UserAreaSubTemplate"}}{{each $data tmpl="Notifications.ButtonSubTemplate"}}<div class="Expand" {{=prepareForAutomation("ToggleExpansion")!}}></div>'});var n="#c_header",h=860,k=120,j=function(t,v,G,E,y,z){var B=a("HTML"),A=a("BODY"),o=a(v),m=o.find(".InnerContainer"),c=m.find(".Content"),C=b.isLtr(),p=Math.max(m.outerWidth(),h),e=c.find(".UserArea"),w=b.getExtraDimensions(e),j=w.width,g=e.find(".UserContent"),x=c.find(".ButtonArea"),f=x.outerWidth()||0,n=c.find(".Expand");c.width("").removeClass("MinWidth NormalWidth WideWidth");e.width("");n.removeClass("ShowImage").hide();g.addClass("ForMeasure").width("");var F=c.outerWidth()||0,l=g.outerWidth()||0,d=p-j-f,i=l+j+f;if(i<h){d=h-j-f;e.width(d);c.addClass("MinWidth")}else{var r=p-i>k,s=!r&&l>=d;if(r){c.width(i);c.addClass("WideWidth")}else{d-=k;s=l>=d;c.addClass("NormalWidth")}if(s){var D="margin"+(C?"Right":"Left");n.css(D,f).addClass("ShowImage").show();d-=n.outerWidth();g.width(d)}e.width(d)}m.css("left",-(B.scrollLeft()+A.scrollLeft()));if(z){var q=a(y.topBarOffsetJquerySelector);if(q.length>0){var u=$UI.Dialog.getLocation(q[0]);t.y=u.height}}else{o.css("bottom","0");t.y=""}g.removeClass("ForMeasure")},g={Top:{controlOptions:{animation:{entranceType:"slidein",entranceArguments:[{left:0,top:-50}],exitType:"slideout",exitArguments:[{left:0,top:-50}]},automationKey:"TopBar",controlCss:"NotificationBar TopBar",queueGroup:"TopBar"},positioner:function(e,a,d,b,c){j(e,a,d,b,c,true)}},Bottom:{controlOptions:{animation:{entranceType:"slidein",entranceArguments:[{left:0,top:50}],exitType:"slideout",exitArguments:[{left:0,top:50}]},automationKey:"BottomBar",controlCss:"NotificationBar BottomBar",queueGroup:"BottomBar"},positioner:j}},c=d.BarDismissalMode={Explicit:"Explicit",Implicit:"Implicit",Timeout:"Timeout"},e={};e[c.Explicit]={controlOptions:{queueMode:"filo"}};e[c.Implicit]={controlOptions:{dismissOnOutsideClick:true,delayOutsideClickDetectionByMsecs:1e3}};e[c.Timeout]={controlOptions:{dismissOnOutsideClick:true,delayOutsideClickDetectionByMsecs:1e3}};var f=function(o,j,z,p,y){b.checkEmptyArgument(j,"Dismissal mode was not supplied.");var h=this,A=a(h),s=e[j];b.checkEmptyArgument(s,"Dismissal mode was supplied but is invalid.");b.checkEmptyArgument(o,"Mode was not supplied.");var q=g[o];b.checkEmptyArgument(q,"Mode was supplied but is invalid.");if(q===g.Top&&j===c.Implicit)throw new Error("Top bars cannot be dismissed implictly.");else if(j===c.Explicit)if(b.isEmptyString(p.action)&&b.isEmptyString(p.close)&&b.isEmptyString(p.alternate))throw new Error("An explict dismissable bar should contain at least one button.");var B,m=false,x=a.extend({trapTab:false},s.controlOptions,q.controlOptions),k=a.extend({},f.defaultUserOptions,y);if(b.isEmptyString(k.topBarOffsetJquerySelector))k.topBarOffsetJquerySelector=n;var t={name:"bar",instance:h,controlOptions:x,userOptions:k,positioner:q.positioner,render:{content:z,buttons:p,buttonOptions:{renderOrder:"alternate,action,close"},template:{id:l,options:{contentCssClassnames:k.autoHeight?"":"Collapsed",backgroundColor:k.backgroundColor,renderTitle:false}}}};if(j===c.Timeout)t.timer={timeoutInMsecs:7e3,callback:function(){d.getDeferredManager().updateState({timedOut:true});A.triggerHandler("timedout",[h]);d.changeAnimation(false,"fadeout");h.dismiss()},getElements:function(){var b=a(d.popoverElement());return a().add(b).add(b.children()).add(b.find(".UserContent").children()).add(b.find(".ButtonArea BUTTON")).add(b.find(".Expand"))}};var d=new i.NotificationBase(t);h.barType=function(){return o};h.dismissalMode=function(){return j};h.show=function(){return d.show({beforeShow:function(){var b=a(d.popoverElement());if(o==="Bottom"&&j!==c.Timeout)b.find(".InnerContainer").addClass("WithMinWidth");b.find(".Clipper").addClass("transitionOnHeightChange");w();u()}})};h.dismiss=function(){d.dismiss({beforeDismiss:function(){v();m=false}})};function u(){if(m)a(d.popoverElement()).find(".Expand").click(r)}function v(){if(m)a(d.popoverElement()).find(".Expand").unbind("click",r)}function r(){var b=a(d.popoverElement()).find(".Content"),f=b.hasClass("Collapsed"),c=b.find(".Clipper"),e=b.find(".UserContent");c.toggleClass("ShowEllipsis");if(f){c.css("height",e.css("height"));b.removeClass("Collapsed")}else{c.css("height","");b.addClass("Collapsed")}d.reposition();return false}function w(){var e=a(d.popoverElement()),b=e.find(".UserArea"),c=b.find(".Clipper"),i=b.find(".UserContent"),f=e.find(".Expand"),h=c.innerHeight(),g=i.innerHeight();if(g>h){m=true;f.addClass("ShowImage");c.addClass("ShowEllipsis")}else f.attr("sutra","")}};f.defaultUserOptions={autoHeight:false,focusFirstButton:false,topBarOffsetJquerySelector:null};var m=function(b,a){if(!a)throw new Error("No parameters were supplied.");return new f(b,a.dismissalMode,a.content,a.buttons,a.options)};d.createTopBar=function(a){return m("Top",a)};d.createBottomBar=function(a){return m("Bottom",a)};b.registerChangeUserOptionsApi("Bar",f.defaultUserOptions,["autoHeight","topBarOffsetJquerySelector","moreCss","notificationContainer"]);d.getQueue().registerSearchApi("getNotificationBars",[g.Top.controlOptions.queueGroup,g.Bottom.controlOptions.queueGroup])})();(function(){"use strict";var b=window.jQuery,g=window.wLive,c=g.Controls.Notifications,h=c.AutomationOptions,e=c.InternalTools,d=e.Toolkit,f="Notifications.Flyout";e.TemplateHelper.registerTemplate({id:f});var a=function(n,g,h,m,l){d.checkEmptyArgument(g,"No content was supplied");if(h==null)throw new Error("No anchor was supplied.");var j=this,k=b.extend({},a.defaultUserOptions,l),c=b.extend({anchorElement:h},a.defaultControlOptions),i=new e.NotificationBase({name:"flyout",instance:j,controlOptions:c,userOptions:k,positioner:function(a,R,t,g){var Q=t.document||t.ownerDocument,B=Q.documentElement,P=B.clientWidth,O=B.clientHeight,n=b(R),j=n.find(".OuterContainer"),q=n.outerWidth(),p=n.outerHeight(),e=b(t),c=e.offset(),J=3;while(J-->0){var f=Math.max(Math.min(q,g.maxWidth),g.minWidth),i=Math.max(Math.min(p,g.maxHeight),g.minHeight),F=i/2,h=c.top,m=c.left,D=e.outerHeight(),E=e.outerWidth(),z=D/2;a.x=m+E/2-f/2;a.y=h-i;a.width=f;a.height=i;if(a.y<0)a.y=h+D;if(a.x<0){a.x=m+E;a.y=h+z-F}else if(a.x+f>P){a.x=m-f;a.y=h+z-F}var y=j.outerWidth(),w=j.outerHeight(),s={top:a.y,left:a.x};if(f!=q)s.width=f;if(i!=p)s.height=i;n.css(s);var x=j.outerWidth(),v=j.outerHeight();c=e.offset();if(y!==x||w!==v){var L=v-w,N=x-y;q+=N;p+=L}else if(h===c.top&&m===c.left)break}var C=d.getExtraDimensions(e),G=parseInt((C.width+e.width())/2+c.left),H=parseInt((C.height+e.height())/2+c.top),K=parseInt(a.width/2+a.x),M=parseInt(a.height/2+a.y),u=0,o=0,I=function(e,f,c){var a=0,b=e-f,d=Math.abs(b)>c;if(d)a=b>0?1:-1;return a},A=function(d,e,c){var a=0,b=I(d,e,5);if(b>0)a=-c;else if(b<0)a=c;return a},l=50;o=A(M,H,l);u=A(K,G,d.isLtr()?l:-l);var r=g.animation.entranceArguments[0];r.left=u;r.top=o;var k=a.y+a.height-O;if(k>0){if(o!==0){k+=l;r.top-=k}a.y-=k}a.y=Math.max(0,a.y)},render:{title:n,content:g,buttons:m,buttonOptions:{excludes:{dismiss:true}},template:{id:f}}});j.show=function(){return i.show({beforeShow:function(){if(c.width)b(i.popoverElement()).find(".UserContent").css({width:c.width})}})}};a.defaultUserOptions={};a.defaultControlOptions={animation:{entranceType:"slidefadein",entranceArguments:[{left:0,top:0}],exitType:"fadeout"},automationKey:"Flyout",changeAnimationOnUserInteraction:false,controlCss:"Flyout",dismissOnOutsideClick:true,isModal:true,maxHeight:758,maxWidth:510,minHeight:54,minWidth:70,queueGroup:"Flyout",setFocus:true,trapTab:false,width:null};c.createFlyout=function(b){if(!b)throw new Error("No parameters were supplied.");return new a(b.title,b.content,b.anchor,b.buttons,b.options)};d.registerChangeUserOptionsApi("Flyout",a.defaultUserOptions,["moreCss","notificationContainer"]);c.getQueue().registerSearchApi("getFlyouts",[a.defaultControlOptions.queueGroup])})();(function(){"use strict";var b=window.jQuery,g=window.wLive,c=g.Controls.Notifications,h=c.AutomationOptions,d=c.InternalTools,f=d.Toolkit,e="Notifications.ModalDialog";d.TemplateHelper.registerTemplate({id:e});var a=function(n,i,j,m,l){f.checkEmptyArgument(i,"No content was supplied");var c=this,g=null,k=b.extend({},a.defaultUserOptions,l),h=new d.NotificationBase({name:"dialog",instance:c,controlOptions:a.defaultControlOptions,userOptions:k,positioner:function(j,f){var i=b("HTML"),h=b("BODY"),a=b(f),c=a.find(".InnerContainer"),e=b(window).innerHeight(),d=a.height(),g=(e-d)/2;j.y=g;c.css("left",-(i.scrollLeft()+h.scrollLeft()))},render:{title:n,content:i,notificationArea:j,buttons:m,template:{id:e,options:{showNotificationArea:true}}}});c.show=function(){return h.show({beforeShow:function(){g=b(h.popoverElement()).find(".NotificationArea")}})};c.dismiss=function(){h.dismiss({beforeDismiss:function(){g=null}})};c.notificationArea=function(){return g}};a.defaultUserOptions={};a.defaultControlOptions={animation:{type:"fade"},automationKey:"ModalDialog",changeAnimationOnUserInteraction:false,controlCss:"ModalDialog",isModal:true,setFocus:true,queueGroup:"ModalDialog"};c.createModalDialog=function(b){return new a(b.title,b.content,b.notificationArea,b.buttons,b.options)};f.registerChangeUserOptionsApi("ModalDialog",a.defaultUserOptions,["moreCss","notificationContainer"]);c.getQueue().registerSearchApi("getModalDialogs",[a.defaultControlOptions.queueGroup])})();(function(){"use strict";var b=window.jQuery,g=window.wLive,d=g.Controls.Notifications,h=d.AutomationOptions,e=d.InternalTools,c=e.Toolkit,f="Notifications.Toast";e.TemplateHelper.registerTemplate({id:f,html:'{{#if contentImage}}<div class="ContentImage" {{=prepareForAutomation("ContentImage")!}}><img src="{{=contentImage}}"></div>{{/if}}{{each $data tmpl="Notifications.UserAreaSubTemplate"}}{{#if sourceIcon}}<div class="SourceIcon" {{=prepareForAutomation("SourceIcon")!}}><img src="{{=sourceIcon}}"></div>{{/if}}<div class="TimeoutTrap"></div><div class="CloseIcon" {{=prepareForAutomation("CloseIcon")!}}><div class="HoverArea"></div></div>'});var a=function(i,p,m,o,t){c.checkEmptyArgument(p,"No content was supplied");c.checkEmptyArgument(o,"No source icon was supplied");var n=b.extend({},a.defaultUserOptions,t),g=this,q=b(g),h={id:f,options:{backgroundColor:n.backgroundColor,contentImage:m,sourceIcon:o,renderTitle:!!i,titleCssClassnames:"TextSemiBold LineHeightStandard"}},j=function(b,a){if(b)h.options.contentCssClassnames=(h.options.contentCssClassnames||"")+" "+a};j(!c.isEmptyString(m),"WithContentImage");j(!c.isEmptyString(i),"WithTitle");var d=new e.NotificationBase({name:"toast",instance:g,controlOptions:a.defaultControlOptions,userOptions:n,positioner:function(a){a.x=null;a.y=null},render:{title:i,content:p,template:h},timer:{timeoutInMsecs:7e3,callback:function(){d.getDeferredManager().updateState({timedOut:true});q.triggerHandler("timedout",[g]);g.dismiss()},getElements:function(){var a=b(d.popoverElement);return b().add(a.find(".TimeoutTrap")).add(a.find("CloseIcon"))}}});g.show=function(){return d.show({beforeShow:function(){r()}})};g.dismiss=function(){d.dismiss({beforeDismiss:function(){s()}})};function r(){b(d.popoverElement()).click(l).find(".CloseIcon").click(k)}function s(){b(d.popoverElement()).unbind("click",l).find(".CloseIcon").unbind("click",k)}function l(){d.getDeferredManager().updateState({clicked:true});q.triggerHandler("click",[g]);d.changeAnimation(false,"none");g.dismiss()}function k(){d.changeAnimation(false,"none");g.dismiss()}};a.defaultUserOptions={};a.defaultControlOptions={animation:{entranceType:"slidein",entranceArguments:[{top:0,left:400}],exitType:"fadeout"},automationKey:"Toast",controlCss:"Toast",queueGroup:"Toast"};d.createToast=function(b){var c=window.top,e=null,d=null;try{if(c!==window&&c.wLive&&c.wLive.Controls&&c.wLive.Controls.Notifications){e=c.wLive.Controls.Notifications;e.getQueue().start();d=e.createToast(b)}}catch(f){}if(!d)d=new a(b.title,b.content,b.contentImage,b.sourceIcon,b.options);return d};c.registerChangeUserOptionsApi("Toast",a.defaultUserOptions,["backgroundColor","moreCss","notificationContainer"]);d.getQueue().registerSearchApi("getToasts",[a.defaultControlOptions.queueGroup])})();(function(){var a=wLive.Controls.Notifications;a.enableAriaSupport=function(){if(jQuery("#notificationContainer").length===0){var a={position:"absolute",padding:"0",margin:"0",height:"100%",width:"100%",top:"0"};a[wLive.Controls.Notifications.InternalTools.Toolkit.isLtr()?"left":"right"]="0";jQuery('<div id="notificationContainer" class="NotificationContainer" persist="1" aria-live="polite" aria-atomic="false"></div>').css(a).prependTo("BODY")}}})();(function(){$Do.register("NotificationControls")})()